{% load static %}

<!DOCTYPE html>
<html>
   <head>
     
      <title>Profile</title>
      <link rel="icon" href="{% static 'logo.png' %}" type="image/png">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <link rel="stylesheet" href="{% static 'styles.css' %}">

      <link rel="stylesheet" href="{% static 'style.css' %}">
      <link rel="stylesheet" href="{% static 'index.css' %}">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> 
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

      <link rel="stylesheet" href="{% static 'bootstrap.min.css' %}">
      <link rel="stylesheet" href="{% static 'profile.min.css' %}">
      
      <link rel="stylesheet" href="{% static 'responsive.css' %}">
      <link rel="stylesheet" href="{% static 'owl.carousel.min.css' %}">
      <link rel="stylesheet" href="{% static 'owl.theme.default.min.css' %}">
      <link rel="stylesheet" href="{% static 'jquery.mCustomScrollbar.min.css' %}">

      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">      
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
      <style>
        .edit{
          width: 250px;
          background-color: black;
          height: 36px;
          border: 1px solid black;
          color: white;
        }

        .edit:hover {
          background-color: rgb(46, 46, 46);
        }
        .bt
        { background-color: transparent;
          color: rgb(0, 0, 0);

        }
        .bt:hover
        { background-color: black;
          color: white;

        } 
        
      </style>
   </head>
   <body>
      <!-- header section start -->
      <div class="">
        <nav class="navbar-expand-lg"  style="background-color: black; height: 100px; padding-top: 0;">
                         <div class="container" style="background-color: black; " >
                          <a class="logo" href="{% url 'home' %}"><img src="{% static 'logo.png' %}" style="height: 50px;margin-top: 10px; margin-left:0px; margin-right:10px;width: 50px;"></a>
                         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                            </button>
                         <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                  <ul class="navbar-nav mr-auto">
                                     <li class="nav-item"><a class="nav-link" href="{% url 'home' %}" style=" margin-top: 20px;margin-left:-20em;margin-right:10px;width: 150px;">Home</a></li>
                                     <li class="nav-item"><a class="nav-link" href="{%url 'stats' %}" style="margin-top: 20px;margin-left:-10em;margin-right:10px;width: 150px;">Stats</a></li>
                                  </ul>
                         
                                  <ul style="margin-top: 20px; margin-right:0px ;">
                                  <li>
                                     {% if request.user.is_authenticated %}
                                     <a class="profile" href="{% url 'profile' %}"style="font-size:20px; color:white">{{ request.user.username }} <i class="fas fa-user"></i></a>
                                     {% else %}
                                     <a class="profile" href="{% url 'login_user' %}"style="font-size:20px; color:white"><i class="fas fa-user"></i></a>
                                     {% endif %}
                                  </li>
                                  </ul>
                         
                         </div>    
        </nav>
     </div>
     
      <br><br>
      <div class="container">
         <div class="main-body">
         
         
               <div class="row gutters-sm">
                 <div class="col-md-4 mb-3">
                   <div class="card">
                     <div class="card-body" style="box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); background-color: rgb(252, 238, 243)">
                       <div class="d-flex flex-column align-items-center text-center">
                         <img src="{% static 'user.png' %}" alt="Admin" class="rounded-circle" width="150">
                         <div class="mt-3">
                           <h6>{{ request.user.first_name}}&nbsp;{{ request.user.last_name}}</h6>
                           <h6><i class="fas fa-envelope"></i>&nbsp;{{ request.user.email}}</h6>
                               
                           
                         </div>
                         <a  href="{% url 'logout_user' %}" style="text-align: center; background-color: black;color: rgb(247, 247, 247); border: 1px solid black; width: 150px; height: 30px;">Log out</a>

                       </div>
                     </div>
                   </div>
                   
                   <div class="card mt-3"style="box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); background-color: rgb(252, 238, 243)">
                    <br>
                    <form method="POST" action="{% url 'profile' %}">
                      {% csrf_token %}
                      <div class="form-group">
                                <div class="input-group">
                                 <span for="min_price" class="price" style="font-size:15px;margin-top: 10px; width: 50px;">Price: </span>
                                  <input type="number" {% if user.priceMin %} value="{{user.priceMin}}" {% endif %}  name="min_price" id="min_price" class="form-control" placeholder="Min" style="width: 100px;">
                                  &nbsp; <input type="number" {% if user.priceMax %} value="{{user.priceMax}}" {% endif %}  name="max_price" id="max_price" class="form-control" placeholder="Max"style="width: 100px;">
                                </div>
                          <br>
                                <div class="input-group">
                                  <span for="min_price" class="price" style="font-size:15px; margin-top: 10px; width: 50px;">m&sup2;:</span>
                                  <input type="number" {% if user.surfaceMin %} value="{{user.surfaceMin}}" {% endif %}  name="min_surf" id="min_surf" class="form-control" placeholder="Min"style="width: 100px;">
                                  &nbsp; <input type="number"{% if user.surfaceMax %} value="{{user.surfaceMax}}" {% endif %}  name="max_surf" id="max_surf" class="form-control" placeholder="Max"style="width: 100px;">
                                </div>
                          <br>
                                
                                <div class="input-group" style="margin-top: 10px;">
                                  <select name="state" class="form-control" required>
                                    <option disabled selected value> --State-- </option>
                                  
                                    {% for item in state %}
                                      <option value="{{ item }}" {% if user.state and item.lower == user.state.lower %} selected {% endif %}>{{ item }}</option>
                                    {% endfor %}
                                  </select>
                                  <select name="ville" class="form-control" required>
                                    <option disabled selected value> --ville-- </option>
                                  
                                    {% for item in ville %}
                                      <option value="{{ item.ville }}" {% if user.ville and item.ville.lower == user.ville.lower %} selected {% endif %}>{% if user.ville and user.state and item.state.lower == user.state.lower %} {{ item.ville }}{% endif %}</option>
                                    {% endfor %}
                                  </select>
                                  
                                </div>
                                <div class="input-group" style="margin-top: 10px;">
                                  <select name="typeb" class="form-control" required>
                                    <option disabled selected value> --Type Bien-- </option>
                                  
                                    {% for item in typeB %}
                                      <option value="{{ item }}" {% if user.typeb and item.lower == user.typeb.lower %} selected {% endif %}>{{ item }}</option>
                                    {% endfor %}
                                  </select>
                                  
                                </div>
                                <br>
                                <div class="input-group">
                                    <button class="edit" type="submit" name="new" >Save</button>
                                </div>
                         
                        </div>
                      
                    </form>
                     
                   </div>
                 </div>
                 <div class="col-md-8">
                   <div class="card mb-3">
                     <div class="card-body"  style="box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); background-color: rgb(252, 238, 243)">
                      <div class="row">
                        {% if user.saved %} 
                            {% for item in user.saved  %}
                            <div class="col-md-4" style="margin-top: 20px;">
                              <div class="box_main" style=" border-color: black; height: 350px;">
                               
                                  {% if item.imagesurlslist %}
                                  {% if item.website == "facebook.com"%}
                                  <img src="{{item.imagesurlslist|first|default:''|safe}}" style="height:150px;width: 250px; ">
                                  {% elif item.website == "remax.com.tn" or item.website == "tayara.tn" or item.website == "bnb.tn"%}
                                  <img src="{{item.imagesurlslist|first|default:''|safe}}" style="height:150px;width: 250px;">
                                  
                                  {% else %}
                                  <img src="http://{{item.imagesurlslist|first|default:''|safe}}" style="height:150px;width: 250px;">
                                  {% endif %}
                                  {% else %}
                                  <img src="https://atlas-content-cdn.pixelsquid.com/stock-images/simple-house-NxE5a78-600.jpg" style="height:150px;width: 250px;">
                                  {% endif %}
                                
                                  {% if item.ville %}
                                  <small style="font-size: 15px; color: black; margin-top: -5em;"><i class="fas fa-map-marker-alt"></i> {{ item.ville|safe }}</small>
                                  {% else %}
                                  <small style="font-size: 15px; color: black; margin-top: -5em;"><i class="fas fa-map-marker-alt"></i>--</small>
                                  {% endif %}
                                  <br>
                                  {% if item.price %}
                                  <small style="font-size: 15px; color: black;"><i class="fas fa-dollar-sign"></i> {{ item.price|safe }} TND</small>
                                  {% else %}
                                  <small style="font-size: 15px; color: black;"><i class="fas fa-dollar-sign"></i>--</small>
                                  {% endif %}
                                
                                <div class="buy_bt" style=" margin-left: -2em;"><a class="bt" href="{% url 'details' %}?item={{ item.code|urlencode }}" style="background-color: transparent; color: black; border: 1px solid black; width: 50px;"><i class="fas fa-link"></i> </a>
                                  &nbsp;<a class="bt" href="{% url 'removesaved' %}?item={{ item.code|urlencode }}" style="background-color: transparent;color: rgb(0, 0, 0); border: 1px solid black; width: 50px;"><i class="far fa-star"></i></i></a>
                                </div>
                               </div>
                            </div>
                            {% endfor %} 
                        {%else%} <h4 class="mb-0">No Ads Saved</h4>
                        {% endif %} 
                                      
                                      
                                      
                                  
                                </div>
                     </div>
                   </div>
     
                   
                     
                   </div>
     
     
     
                 
               </div>
     
             </div>
         </div>
      <br>

      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <script src="js/plugin.js"></script>
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>
      <!-- javascript --> 
      <script src="js/owl.carousel.js"></script>
      <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
   </body>
</html>